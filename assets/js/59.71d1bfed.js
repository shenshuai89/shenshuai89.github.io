(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{371:function(e,n,s){"use strict";s.r(n);var a=s(7),t=Object(a.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("blockquote",[n("p",[e._v("基于Create React App 环境体验three.js库。")])]),e._v(" "),n("p",[e._v("threejs 是一个 3D JavaScript库，用于在网页上呈现3D内容。它是一个开源项目，旨在创建一个易于使用、轻量级、跨浏览器、通用的3D库。")]),e._v(" "),n("p",[e._v("当前版本包括WebGL（Web图形库）渲染器和JavaScript API，可无需插件用在任何兼容渲染交互式2D和3D图形的Web浏览器中。现代浏览器广泛支持WebGL。")]),e._v(" "),n("p",[e._v("WebGL是一个绘制点、线和三角形的底册API。要使用WebGL做任何有用的事情，它需要相当多的代码，这时产生了threejs。它处理高级功能，如场景、灯光、阴影、材质、纹理、3D数学等。")]),e._v(" "),n("p",[e._v("threejs还支持其他"),n("strong",[e._v("渲染器")]),e._v("，如WebGPU、SVG和CSS3D。"),n("a",{attrs:{href:"https://threejs.org/examples/",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方示例"),n("OutboundLink")],1),e._v("显示了高级用法。")]),e._v(" "),n("p",[e._v("作为一篇入门threejs的文章，我们快速了解它是什么以及如何使用它。")]),e._v(" "),n("h2",{attrs:{id:"官方立方体旋转动画"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#官方立方体旋转动画"}},[e._v("#")]),e._v(" 官方立方体旋转动画")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b9f52a5738f4a5c9ddfc12ffd7b2dfa~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),e._v(" "),n("p",[e._v("上面的图像由官方动画立方体代码渲染，该代码列在threejs的README文件中。下面是代码：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("import * as THREE from 'three';\n\n// init\nconst camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 10);\ncamera.position.z = 2;\n\nconst scene = new THREE.Scene();\n\nconst geometry = new THREE.BoxGeometry(0.2, 0.2, 0.2);\nconst material = new THREE.MeshNormalMaterial();\n\nconst mesh = new THREE.Mesh(geometry, material);\nscene.add(mesh);\n\nconst renderer = new THREE.WebGLRenderer({ antialias: true });\nrenderer.setSize(window.innerWidth, window.innerHeight);\nrenderer.setAnimationLoop(animation);\ndocument.body.appendChild(renderer.domElement);\n\n// animation\nfunction animation(time) {\n  mesh.rotation.x = time / 2000;\n  mesh.rotation.y = time / 1000;\n\n  renderer.render(scene, camera);\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br")])]),n("p",[e._v("接下来分析它是如何工作的：")]),e._v(" "),n("p",[e._v("在上面代码第一行， THREE 被导入；")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("import * as THREE from 'three';\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("在代码第4行， "),n("code",[e._v("PerspectiveCamera")]),e._v(" 【透视摄像机】被创建")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 10);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[n("code",[e._v("PerspectiveCamera")]),e._v("的构造函数需要4个参数，具体如下：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("export class PerspectiveCamera extends Camera {\n  /**\n   * @param [fov=50] Camera frustum vertical field of view. Default value is 50.\n   * @param [aspect=1] Camera frustum aspect ratio. Default value is 1.\n   * @param [near=0.1] Camera frustum near plane. Default value is 0.1.\n   * @param [far=2000] Camera frustum far plane. Default value is 2000.\n   */\n  constructor(fov?: number, aspect?: number, near?: number, far?: number);\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br")])]),n("p",[e._v("在本例中，fov（视角）在垂直维度上设置为70度，纵横比设置为DOM窗口的纵横比（window.innerWidth/window.inerHeight）。")]),e._v(" "),n("p",[e._v("near和far表示将要渲染的摄影机前面的空间。")]),e._v(" "),n("p",[e._v("任何在 near 之前或 far 之后的东西都会被摄像机剪掉。相机前面的范围设置为[0.01，10]。平截头体是一种3D形状，它像一个顶端被切掉的金字塔。")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42151435c091452db89e628b12210467~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),e._v(" "),n("p",[e._v("在官方代码第5行， carmera.position 是 三维向量。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("camera.position.z = 2;\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("相机位于[0，0，2]。+Y 和 -Y 轴位于绿色正方形的中间。")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/17abb924b77f49f5bdc2a472a46f2a3b~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/012a910aee0b4bbea7eff78ed9cf16bf~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),e._v(" "),n("p",[e._v("表示摄像机的可视范围。")]),e._v(" "),n("p",[e._v("以下是摄像机的类型：阵列相机、相机、立方体相机、正交相机、透视相机和立体相机。")]),e._v(" "),n("p",[e._v("在官方代码行7中，实例化了一个场景")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const scene = new THREE.Scene();\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("场景 scene 是存放对象、灯光和相机的地方。以下都是可用的场景类型：Fog, FogExp2, and Scene.")]),e._v(" "),n("p",[e._v("在第9行代码中，一个 BoxGeometry 被实例化。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const geometry = new THREE.BoxGeometry(0.2, 0.2, 0.2);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("几何体 Geometry 定义对象的形状。BoxGeometry定义长方体尺寸-宽度、高度和深度。在该示例中，宽度、高度和深度设置为0.2。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("export class BoxGeometry extends BufferGeometry {\n  /**\n   * @param [width=1] — Width of the sides on the X axis.\n   * @param [height=1] — Height of the sides on the Y axis.\n   * @param [depth=1] — Depth of the sides on the Z axis.\n   * @param [widthSegments=1] — Number of segmented faces along the width of the sides.\n   * @param [heightSegments=1] — Number of segmented faces along the height of the sides.\n   * @param [depthSegments=1] — Number of segmented faces along the depth of the sides.\n   */\n  constructor(\n    width?: number,\n    height?: number,\n    depth?: number,\n    widthSegments?: number,\n    heightSegments?: number,\n    depthSegments?: number,\n  );\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br")])]),n("p",[e._v("立方体的构造函数还可以定义沿每条边的分段面。默认情况下，每条边都有一个分段面。每边的细节越多，需要的分割面就越多。以下是4 x 5 x 10的分段面示意图：")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6d290f0cf40b446f8b046cc1f5a513e4~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),e._v(" "),n("p",[e._v("这些是可用的几何类型：BoxGeometry、CapsuleGeometry，CircleGeomety、ConeGeometry和CylinderGeometry，和 WireframeGeometry。")]),e._v(" "),n("p",[e._v("在代码第10行，创建一个 MeshNormalMaterial 对象")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const material = new THREE.MeshNormalMaterial();\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("材质【MaterialParameters】对象的参数-有光泽、平坦、颜色、纹理等-并采用以下参数：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("export interface MaterialParameters {\n  alphaTest?: number | undefined;\n  alphaToCoverage?: boolean | undefined;\n  blendDst?: BlendingDstFactor | undefined;\n  blendDstAlpha?: number | undefined;\n  blendEquation?: BlendingEquation | undefined;\n  blendEquationAlpha?: number | undefined;\n  blending?: Blending | undefined;\n  blendSrc?: BlendingSrcFactor | BlendingDstFactor | undefined;\n  blendSrcAlpha?: number | undefined;\n  clipIntersection?: boolean | undefined;\n  clippingPlanes?: Plane[] | undefined;\n  clipShadows?: boolean | undefined;\n  colorWrite?: boolean | undefined;\n  defines?: any;\n  depthFunc?: DepthModes | undefined;\n  depthTest?: boolean | undefined;\n  depthWrite?: boolean | undefined;\n  name?: string | undefined;\n  opacity?: number | undefined;\n  polygonOffset?: boolean | undefined;\n  polygonOffsetFactor?: number | undefined;\n  polygonOffsetUnits?: number | undefined;\n  precision?: 'highp' | 'mediump' | 'lowp' | null | undefined;\n  premultipliedAlpha?: boolean | undefined;\n  dithering?: boolean | undefined;\n  side?: Side | undefined;\n  shadowSide?: Side | undefined;\n  toneMapped?: boolean | undefined;\n  transparent?: boolean | undefined;\n  vertexColors?: boolean | undefined;\n  visible?: boolean | undefined;\n  format?: PixelFormat | undefined;\n  stencilWrite?: boolean | undefined;\n  stencilFunc?: StencilFunc | undefined;\n  stencilRef?: number | undefined;\n  stencilWriteMask?: number | undefined;\n  stencilFuncMask?: number | undefined;\n  stencilFail?: StencilOp | undefined;\n  stencilZFail?: StencilOp | undefined;\n  stencilZPass?: StencilOp | undefined;\n  userData?: any;\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br"),n("span",{staticClass:"line-number"},[e._v("35")]),n("br"),n("span",{staticClass:"line-number"},[e._v("36")]),n("br"),n("span",{staticClass:"line-number"},[e._v("37")]),n("br"),n("span",{staticClass:"line-number"},[e._v("38")]),n("br"),n("span",{staticClass:"line-number"},[e._v("39")]),n("br"),n("span",{staticClass:"line-number"},[e._v("40")]),n("br"),n("span",{staticClass:"line-number"},[e._v("41")]),n("br"),n("span",{staticClass:"line-number"},[e._v("42")]),n("br"),n("span",{staticClass:"line-number"},[e._v("43")]),n("br")])]),n("p",[e._v("网格材质：MeshNormalMaterialParameters 有如下参数")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("export interface MeshNormalMaterialParameters extends MaterialParameters {\n  bumpMap?: Texture | null | undefined;\n  bumpScale?: number | undefined;\n  normalMap?: Texture | null | undefined;\n  normalMapType?: NormalMapTypes | undefined;\n  normalScale?: Vector2 | undefined;\n  displacementMap?: Texture | null | undefined;\n  displacementScale?: number | undefined;\n  displacementBias?: number | undefined;\n  wireframe?: boolean | undefined;\n  wireframeLinewidth?: number | undefined;\n  flatShading?: boolean | undefined;\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br")])]),n("p",[e._v("以下是可以使用的材质类型：ShadowMaterial, SpriteMaterial, RawShaderMaterial, ShaderMaterial, PointsMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshPhongMaterial, MeshToonMaterial, MeshNormalMaterial, MeshLambertMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshBasicMaterial, MeshMatcapMaterial, LineDashedMaterial, LineBasicMaterial, and Material.")]),e._v(" "),n("p",[e._v("在代码第12行，创建了几何体形状和 网格材质，然后添加到 场景中：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const mesh = new THREE.Mesh(geometry, material);\nscene.add(mesh);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("网格是构成三维对象图形的骨架，它由几何体（材质）、材质（曲面）和场景 组成。")]),e._v(" "),n("p",[e._v("在官方代码行15–18中，WebGL呈现被实例化。它被设置为DOM窗口大小，配置了一个动画循环，其domElement被附加到DOM主体。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const renderer = new THREE.WebGLRenderer({ antialias: true });\nrenderer.setSize(window.innerWidth, window.innerHeight);\nrenderer.setAnimationLoop(animation);\ndocument.body.appendChild(renderer.domElement);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("在官方代码行21–26中，动画 animation 函数被创建。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function animation(time) {  \n  mesh.rotation.x = time / 2000;   \n  mesh.rotation.y = time / 1000;   \n  renderer.render(scene, camera);\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("参数 time 是自渲染器以来的时间，调用setAnimationLoop（动画）。时间单位为毫秒。由于在每个轴上旋转一次需要2π，因此上述动画函数绕x轴旋转约12.56秒，绕y轴旋转约6.28秒。")]),e._v(" "),n("p",[e._v("setAnimationLoop（animation）是启动动画的请求。如果动画为空，它将停止任何正在进行的动画。"),n("strong",[e._v("setAnimationLoop是requestAnimationFrame的替换")]),e._v("。")]),e._v(" "),n("p",[e._v("renderer.render(scene, camera) 渲染并更新数据；")]),e._v(" "),n("h2",{attrs:{id:"使用react-脚手架搭建threejs环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用react-脚手架搭建threejs环境"}},[e._v("#")]),e._v(" 使用react 脚手架搭建threejs环境")]),e._v(" "),n("p",[e._v("我们使用"),n("a",{attrs:{href:"https://create-react-app.dev/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Create React App"),n("OutboundLink")],1),e._v("来了解三种情况。使用以下命令创建React项目：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ npx create-react-app react-three\n$ cd react-three\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("安装 three.js 依赖。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("npm i three\n// 或者\nyarn add three\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("之后可以在package.json中看到")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('"dependencies": {\n  "three": "^0.145.0"\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("这样就把 three 添加到项目中。")]),e._v(" "),n("p",[e._v("使用下面代码，替换 src/App.js 文件")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("import { useEffect, useRef } from 'react';\nimport * as THREE from 'three';\n\nfunction App() {\n  const divRef = useRef();\n  \n  useEffect(() => {\n    // init\n    const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 10);\n    camera.position.z = 2;\n\n    const scene = new THREE.Scene();\n\n    const geometry = new THREE.BoxGeometry(0.2, 0.2, 0.2);\n    const material = new THREE.MeshNormalMaterial();\n\n    const mesh = new THREE.Mesh(geometry, material);\n    scene.add(mesh);\n\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setAnimationLoop(animation);\n    divRef.current.appendChild(renderer.domElement);\n\n    // animation\n    function animation(time) {\n      mesh.rotation.x = time / 2000;\n      mesh.rotation.y = time / 1000;\n\n      renderer.render(scene, camera);\n    }\n  }, []);\n  \n  return <div ref={divRef} />;\n}\n\nexport default App;\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br"),n("span",{staticClass:"line-number"},[e._v("35")]),n("br"),n("span",{staticClass:"line-number"},[e._v("36")]),n("br"),n("span",{staticClass:"line-number"},[e._v("37")]),n("br")])]),n("p",[e._v("以上代码几乎和官方代码相同，除了以下几点：")]),e._v(" "),n("ul",[n("li",[e._v("初始化代码封装在useEffect（第7–32行）中，并初始化一次（第32行的useEfect依赖列表设置为空数组[]）。")]),e._v(" "),n("li",[e._v("渲染器有所不同，原来 renderer.domElement 是添加到 document.body 中，现在它被添加到divRef.current中。")])]),e._v(" "),n("p",[e._v("执行命令 "),n("code",[e._v("npm start")]),e._v("可以看到立方体旋转动画。")]),e._v(" "),n("p",[e._v("以上代码存在些可改进的方法：")]),e._v(" "),n("ul",[n("li",[e._v("不应该依赖DOM窗口的大小，因为我们可以实现 three.js 在一个组件内。")]),e._v(" "),n("li",[e._v("该应用不能随着浏览器缩放而缩放。")]),e._v(" "),n("li",[e._v("与大多数JavaScript库不同，three.js不会自动清理资源。它依靠浏览器在用户离开页面时进行清理。最佳实践是在对象不再使用时及时释放内存。")])]),e._v(" "),n("p",[e._v("改良后的 src/app.js 文件")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("import { useEffect, useRef } from 'react';\nimport * as THREE from 'three';\n\nfunction App() {\n  const divRef = useRef();\n\n  useEffect(() => {\n    // init\n    let width = divRef.current.clientWidth;\n    let height = divRef.current.clientHeight;\n    const camera = new THREE.PerspectiveCamera(70, width / height, 0.01, 10);\n    camera.position.z = 2;\n\n    const scene = new THREE.Scene();\n\n    const geometry = new THREE.BoxGeometry(0.2, 0.2, 0.2);\n    const material = new THREE.MeshNormalMaterial();\n\n    const mesh = new THREE.Mesh(geometry, material);\n    scene.add(mesh);\n\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(width, height);\n    renderer.setAnimationLoop(animation);\n\n    const divCurrent = divRef.current;\n    divCurrent.appendChild(renderer.domElement);\n\n    window.addEventListener('resize', handleResize);\n\n    // handle window resize\n    function handleResize() {\n      width = divRef.current.clientWidth;\n      height = divRef.current.clientHeight;\n      renderer.setSize(width, height);\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n      renderer.render(scene, camera);\n    }\n\n    // animation\n    function animation(time) {\n      mesh.rotation.x = time / 2000;\n      mesh.rotation.y = time / 1000;\n\n      renderer.render(scene, camera);\n    }\n\n    return () => {\n      renderer.setAnimationLoop(null);\n      window.removeEventListener('resize', handleResize);\n      divCurrent.removeChild(renderer.domElement);\n      scene.remove(mesh);\n      geometry.dispose();\n      material.dispose();\n    };\n  }, []);\n\n  return <div ref={divRef} style={{ height: '100vh' }} />;\n}\n\nexport default App;\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br"),n("span",{staticClass:"line-number"},[e._v("35")]),n("br"),n("span",{staticClass:"line-number"},[e._v("36")]),n("br"),n("span",{staticClass:"line-number"},[e._v("37")]),n("br"),n("span",{staticClass:"line-number"},[e._v("38")]),n("br"),n("span",{staticClass:"line-number"},[e._v("39")]),n("br"),n("span",{staticClass:"line-number"},[e._v("40")]),n("br"),n("span",{staticClass:"line-number"},[e._v("41")]),n("br"),n("span",{staticClass:"line-number"},[e._v("42")]),n("br"),n("span",{staticClass:"line-number"},[e._v("43")]),n("br"),n("span",{staticClass:"line-number"},[e._v("44")]),n("br"),n("span",{staticClass:"line-number"},[e._v("45")]),n("br"),n("span",{staticClass:"line-number"},[e._v("46")]),n("br"),n("span",{staticClass:"line-number"},[e._v("47")]),n("br"),n("span",{staticClass:"line-number"},[e._v("48")]),n("br"),n("span",{staticClass:"line-number"},[e._v("49")]),n("br"),n("span",{staticClass:"line-number"},[e._v("50")]),n("br"),n("span",{staticClass:"line-number"},[e._v("51")]),n("br"),n("span",{staticClass:"line-number"},[e._v("52")]),n("br"),n("span",{staticClass:"line-number"},[e._v("53")]),n("br"),n("span",{staticClass:"line-number"},[e._v("54")]),n("br"),n("span",{staticClass:"line-number"},[e._v("55")]),n("br"),n("span",{staticClass:"line-number"},[e._v("56")]),n("br"),n("span",{staticClass:"line-number"},[e._v("57")]),n("br"),n("span",{staticClass:"line-number"},[e._v("58")]),n("br"),n("span",{staticClass:"line-number"},[e._v("59")]),n("br"),n("span",{staticClass:"line-number"},[e._v("60")]),n("br"),n("span",{staticClass:"line-number"},[e._v("61")]),n("br"),n("span",{staticClass:"line-number"},[e._v("62")]),n("br")])]),n("p",[e._v("在第59行，div元素的高度设置为视口高度的100%。")]),e._v(" "),n("p",[e._v("在第9-10行，我们将div元素的宽度和高度保存为变量，以便在第11行和第23行重用。")]),e._v(" "),n("p",[e._v("在第26行，divRef。"),n("code",[e._v("divRef.current")]),e._v("保存为divCurrent。这允许在第27行添加到divCurrent的子元素在第52行被删除。")]),e._v(" "),n("p",[e._v("在第29行，事件监听器使用回调函数handleResize侦听resize事件。")]),e._v(" "),n("p",[e._v("在第32–39行，handleResize函数检索新的宽度和高度，并使用它们更新渲染和相机。在第38行，渲染器。渲染（场景、摄影机）重新渲染更新的数据。")]),e._v(" "),n("p",[e._v("在第49–56行，返回cleanup函数以停止动画、删除窗口侦听器并释放三个资源。")]),e._v(" "),n("h2",{attrs:{id:"使用-react-three-fiber包创建应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-react-three-fiber包创建应用"}},[e._v("#")]),e._v(" 使用@react-three/fiber包创建应用")]),e._v(" "),n("p",[e._v("react-tree-fiber是一个用于threejs的react渲染器。它允许我们用JSX写threejs更具声明性。threejs的所有工作都将在react-tree-fiber中完成。")]),e._v(" "),n("p",[e._v("把jsx元素直接转换为threejs对象，没有其余额外的消耗，例如将 ＜mesh/＞转换为新的THREE.mesh（）")]),e._v(" "),n("p",[e._v("安装包 @react-three/fiber")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("npm i @react-three/fiber\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("添加到package.json中")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('"dependencies": {\n  "@react-three/fiber": "^8.0.19",\n  "three": "^0.145.0"\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("使用react-three/fiber后，src/App.js更简洁，看起来更像React。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("mport { useRef } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\n\nfunction Box() {\n  const meshRef = useRef();\n  useFrame((state, delta) => {\n    if (meshRef.current) {\n      meshRef.current.rotation.x += delta / 2;\n      meshRef.current.rotation.y += delta;\n    }\n  });\n  return (\n    <mesh ref={meshRef}>\n      <boxGeometry args={[0.2, 0.2, 0.2]} />\n      <meshNormalMaterial />\n    </mesh>\n  );\n}\n\nfunction App() {\n  return (\n    <Canvas\n      camera={{ fov: 70, near: 0.01, far: 100, position: [0, 0, 2] }}\n      style={{ height: '100vh', backgroundColor: 'black' }}\n    >\n      <Box />\n    </Canvas>\n  );\n}\n\nexport default App;\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br")])]),n("p",[e._v("在第4–18行，定义了Box组件。它为网格元素定义meshRef，该元素由钩子useFrame在第6–11行使用。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function useFrame(\n  callback: (state: RootState, delta: number, frame?: THREE.XRFrame) => void, \n  renderPriority?: number\n): null;\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("对每帧调用useFrame。参数state包括所有三个状态信息，包括gl（WebGL）、相机、时钟、场景等。")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e588d6ba23344a1890c719c179e25700~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),e._v(" "),n("p",[e._v("参数delta是以秒为单位的时钟delta。它用于在第8–9行设置动画。")]),e._v(" "),n("p",[e._v("renderPriority是自动切换渲染开关的高级参数。")]),e._v(" "),n("p",[e._v("在 react-three-fiber 中，mesh 对象总是属于threejs的对象，成为一个全局组件。我们创建 mesh组件元素【在13-16行】，包括 boxGeometry 和 meshNormalMaterial。")]),e._v(" "),n("p",[e._v("这盒子元素被放置在"),n("Canvas",[e._v("标签中。")])],1),e._v(" "),n("p",[e._v("Canvas是three.js的基础。它渲染three组件。Canvas的道具包括gl（WebGL）、相机、光线投射器等。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("export declare type RenderProps<TCanvas extends Element> = {\n  gl?: GLProps;\n  size?: Size;\n  shadows?: boolean | Partial<THREE.WebGLShadowMap>;\n  legacy?: boolean;\n  linear?: boolean;\n  flat?: boolean;\n  orthographic?: boolean;\n  frameloop?: 'always' | 'demand' | 'never';\n  performance?: Partial<Omit<Performance, 'regress'>>;\n  dpr?: Dpr;\n  raycaster?: Partial<THREE.Raycaster>;\n  camera?: (Camera | Partial<ReactThreeFiber.Object3DNode<THREE.Camera, \n    typeof THREE.Camera> & ReactThreeFiber.Object3DNode<THREE.PerspectiveCamera, \n    typeof THREE.PerspectiveCamera> & ReactThreeFiber.Object3DNode<THREE.OrthographicCamera, \n    typeof THREE.OrthographicCamera>>) & {\n      manual?: boolean;\n    };\n  events?: (store: UseBoundStore<RootState>) => EventManager<HTMLElement>;\n  onCreated?: (state: RootState) => void;\n  onPointerMissed?: (event: MouseEvent) => void;\n};\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br")])]),n("p",[e._v("在第23行，摄像机的道具被定义为{fov:70，near:0.01，far:100，position:[0,0,2]}。")]),e._v(" "),n("p",[e._v("在第24行，样式定义为{height:“100vh”，backgroundColor:“black”}。对于宽度，画布会自动拉伸到100%。")]),e._v(" "),n("p",[e._v("这个简洁的代码和其他代码一样有效。")]),e._v(" "),n("p",[e._v("你是否注意到，我们并没有调用 object.dispose() ！")]),e._v(" "),n("p",[e._v("React知道对象的生命周期，React-tree-fiber将尝试通过调用对象来释放资源。dispose()，如果存在，则对所有未装入的对象执行。通过将 dispose＝{ null ｝放置在网格、材质等上，甚至放置在父容器（如组）上，可以关闭dispose尝试。")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("本文是翻译文章：[原文链接](https://betterprogramming.pub/working-with-three-js-the-popular-3d-javascript-library-bd2e9b03c95a)")])])])])}),[],!1,null,null,null);n.default=t.exports}}]);